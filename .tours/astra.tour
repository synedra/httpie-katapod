{
  "title": "Exploring Stargate with HTTPie - Astra",
  "steps": [
    {
      "file": "intro.md",
      "line": 1,
      "description": "<!-- TOP -->\n<div class=\"top\">\n  <img src=\"https://datastax-academy.github.io/katapod-shared-assets/images/ds-academy-2023.svg\" />\n  <div class=\"scenario-title-section\">\n    <span class=\"scenario-title\">Exploring Stargate with HTTPie</span>\n    <span class=\"scenario-subtitle\">ℹ️ For technical support, please contact us via <a href=\"mailto:kirsten.hunter@datastax.com\">email</a> or <a href=\"https://linkedin.com/in/synedra\">LinkedIn</a>.</span>\n  </div>\n</div>\n\n<!-- CONTENT -->\n<main>\n    <br/>\n    <div class=\"container px-4 py-2\">\n     <div class=\"row g-4 py-2 row-cols-1 row-cols-lg-1\">\n      <div class=\"feature col div-choice\">\n            <div class=\"scenario-description\">Learn about the Stargate APIs from the Command Line</div>\n            <ul>\n              <li><span class=\"scenario-description-attribute\">Difficulty</span>: Beginner</li>\n              <li><span class=\"scenario-description-attribute\">Time</span>: 15 minutes</li>\n            </ul>\n            <div class=\"scenario-objectives\">In this hands-on lab, you will:</div>\n            <ul>\n              <li><span class=\"scenario-objective\">Use a hosted Astra database</li>\n              <li><span class=\"scenario-objective\">Learn how to interact with the Stargate REST API</li>\n            </ul>\n      </div>\n     </div>\n    </div>\n    <div class=\"container px-4 py-2\">\n        <div class=\"scenario-choices\">Run this hands-on lab using Astra DB:</div><br/>\n        <div class=\"row g-4 py-2 row-cols-1 row-cols-lg-1\">\n          <div class=\"feature col div-choice\">\n            <div class=\"logo-astradb\">\n              <img src=\"https://datastax-academy.github.io/katapod-shared-assets/images/logo-astradb.svg\" height=\"40px\" />\n            </div>\n            <div class=\"astradb-line1\">Cloud database service built on Apache Cassandra</div>\n            <div class=\"astradb-line2\">You will connect to a free cloud database service that runs a Cassandra cluster for you.</div>\n            <br/>\n            <a href='command:katapod.loadPage?[{\"step\":\"step1-astra\"}]' class=\"btn btn-primary btn-astra\">\n              Start with Astra DB\n            </a>\n          </div>\n          <!--\n          <div class=\"feature col div-choice\">\n            <div class=\"logo-cassandra\">\n                <img src=\"https://datastax-academy.github.io/katapod-shared-assets/images/logo-cassandra.png\" height=\"40px\" />\n            </div>\n            <div class=\"cassandra-line1\">Local deployment of open-source Apache Cassandra</div>\n            <div class=\"cassandra-line2\">You will use a Cassandra cluster deployed locally in Gitpod using Docker.</div>\n            <br/>\n            <a href='command:katapod.loadPage?[{\"step\":\"step1-cassandra\"}]' class=\"btn btn-primary btn-cassandra\">\n              Start with Cassandra\n            </a>   \n          </div>\n          -->\n        </div>\n    </div>\n</main>"
    },
    {
      "file": "step1-astra.md",
      "line": 1,
      "description": "<!-- TOP -->\n<div class=\"top\">\n  <img src=\"https://datastax-academy.github.io/katapod-shared-assets/images/ds-academy-2023.svg\" />\n  <div class=\"scenario-title-section\">\n    <span class=\"scenario-title\">Exploring Stargate with HTTPie</span>\n    <span class=\"scenario-subtitle\">ℹ️ For technical support, please contact us via <a href=\"mailto:kirsten.hunter@datastax.com\">email</a> or <a href=\"https://linkedin.com/in/synedra\">LinkedIn</a>.</span>\n  </div>\n</div>\n\n<!-- NAVIGATION -->\n<div id=\"navigation-top\" class=\"navigation-top\">\n <a href='command:katapod.loadPage?[{\"step\":\"intro\"}]' \n   class=\"btn btn-dark navigation-top-left\">⬅️ Back\n </a>\n<span class=\"step-count\"> Step 1 of 3</span>\n <a href='command:katapod.loadPage?[{\"step\":\"step2-astra\"}]' \n    class=\"btn btn-dark navigation-top-right\">Next ➡️ Tables in the REST API\n  </a>\n</div>\n\n<!-- CONTENT -->\n\n<div class=\"step-title\">Connect to Astra DB and create a database</div>\n\n**Objectives**\nIn this step we will\n\n1. Create token\n2. Create database\n3. Create Credentials\n4. Verify Credentials\n\n# 1. Create the token\n\n✅ Create an application token with the _Database Administrator_ role to access Astra DB. Skip this step if you already have a token.\n\n<ul>\n  <li>Sign in (or sign up) to your Astra account at <a href=\"https://astra.datastax.com?utm_source=awesome-astra&utm_medium=social_organic&utm_campaign=httpie-katapod&utm_term=all-plays&utm_content=register\">astra.datastax.com</a></li>\n  <li>Create an application token with the <i>Database Administrator</i> role by following <a href=\"https://awesome-astra.github.io/docs/pages/astra/create-token/\" target=\"_blank\">these instructions</a></li>\n</ul>\n\n# 2. Create the database\n\n✅ Setup Astra CLI by providing the Database Administrator application token you created <a href=\"https://awesome-astra.github.io/docs/pages/astra/create-token/\" target=\"_blank\">here</a>:\n\n```\nastra setup\n```\n\n✅ Create database `workshops` and keyspace `library` if they do not exist:\n\n```\nastra db create workshops -k library --if-not-exist --wait\n```\n\nThis operation may take a bit longer when creating a new database or resuming an existing hibernated database.\n\n✅ Verify that database `workshops` is `ACTIVE` and keyspace `library` exists:\n\n```\nastra db get workshops\n```\n\nIf the command fails, please revisit the previous steps to make sure that the database exists and is `ACTIVE`, and retry connecting to the database again.\n\n<div class=\"step-title\">HTTPie and Credentials</div>\n\n---\n\n# 3. Create the credentials file\n\n```\nastra db create-dotenv -k library workshops\n```\n\nNow let's copy those credentials to our environment\n\n```\npython assets/set-environment.py .env workshops\n```\n\n## 4. Verify Credentials\n\nMake a call to the API using httpie to make sure your credentials are working:\n\n```\nhttp --auth-type astra -a workshops: :/rest/v1/keyspaces\n```\n\nWe've actually got an httpie config file so we can skip the auth-type stuff.\n\nTry the simpler call to make sure it works:\n\n```\nhttp :/rest/v1/keyspaces\n```\n\n<details><summary>Show me the CQL</summary>\n  \n```\nastra db cqlsh workshops -k library -e \"desc keyspaces;\"\n```\n  \n</details>\n\nGreat, it's time to dive deeper into the Stargate APIs to see what they can do for you.\n\n<!-- NAVIGATION -->\n<div id=\"navigation-bottom\" class=\"navigation-bottom\">\n <a href='command:katapod.loadPage?[{\"step\":\"intro\"}]'\n   class=\"btn btn-dark navigation-bottom-left\">⬅️ Back - Overview\n </a>\n <a href='command:katapod.loadPage?[{\"step\":\"step2-astra\"}]'\n    class=\"btn btn-dark navigation-bottom-right\">Next ➡️ Tables in the REST API\n  </a>\n</div>"
    },
    {
      "file": "step2-astra.md",
      "line": 1,
      "description": "<!-- TOP -->\n<div class=\"top\">\n  <img src=\"https://datastax-academy.github.io/katapod-shared-assets/images/ds-academy-2023.svg\" />\n  <div class=\"scenario-title-section\">\n    <span class=\"scenario-title\">Exploring Stargate with HTTPie</span>\n    <span class=\"scenario-subtitle\">ℹ️ For technical support, please contact us via <a href=\"mailto:kirsten.hunter@datastax.com\">email</a> or <a href=\"https://linkedin.com/in/synedra\">LinkedIn</a>.</span>\n  </div>\n</div>\n\n<!-- NAVIGATION -->\n<div id=\"navigation-top\" class=\"navigation-top\">\n <a href='command:katapod.loadPage?[{\"step\":\"step1-astra\"}]' \n   class=\"btn btn-dark navigation-top-left\">⬅️ Back\n </a>\n<span class=\"step-count\"> Step 2 of 3</span>\n <a href='command:katapod.loadPage?[{\"step\":\"step3-astra\"}]' \n    class=\"btn btn-dark navigation-top-right\">Next ➡️ REST Rows\n  </a>\n</div>\n\n<div class=\"step-title\">Exploring Stargate APIs from the command line - REST Tables</div>\n\nIn this section you will use our httpie configuration to take a look at the Stargate REST API. We will focus on creating and retrieving a table.\n\n- REST - List Keyspaces\n- REST - Create a Table\n- REST - Retrieve Tables\n\n# 1. Create a table\n\nThe first thing that needs to happen is to create a table. HTTPie will handle the authentication and create the right server based on your .astrarc file, but you'll need to make sure and use that \"library\" keyspace.\n\nHere are the steps:\n\n## A. Check for your keyspace\n\n```\nhttp :/rest/v2/schemas/keyspaces\n```\n\nDo you see 'library' in there? Great, we're ready to move on.\n\n<details><summary>Show me the CQL</summary>\n  \n```\nastra db cqlsh workshops -k library -e \"desc keyspaces;\"\n```\n  \n</details>\n\nYou could also check for a specific keyspace:\n\n```\nhttp :/rest/v2/schemas/keyspaces/library\n```\n\n## B. Create the table\n\n```\nhttp POST :/rest/v2/schemas/keyspaces/library/tables json:='{\n \t\"name\": \"users\",\n \t\"columnDefinitions\":\n \t  [\n        {\n \t      \"name\": \"firstname\",\n \t      \"typeDefinition\": \"text\"\n \t    },\n        {\n \t      \"name\": \"lastname\",\n \t      \"typeDefinition\": \"text\"\n \t    },\n        {\n \t      \"name\": \"favorite color\",\n \t      \"typeDefinition\": \"text\"\n \t    }\n \t  ],\n \t\"primaryKey\":\n \t  {\n \t    \"partitionKey\": [\"firstname\"],\n \t    \"clusteringKey\": [\"lastname\"]\n \t  },\n \t\"tableOptions\":\n \t  {\n \t    \"defaultTimeToLive\": 0,\n \t    \"clusteringExpression\":\n \t      [{ \"column\": \"lastname\", \"order\": \"ASC\" }]\n \t  }\n}'\n```\n\nJust to be sure, go ahead and ask for a listing of the tables in the library keyspace:\n\n```\nhttp :/rest/v2/schemas/keyspaces/library/tables\n```\n\n<details><summary>Show me the CQL for this command</summary>\n \t\n```\nastra db cqlsh workshops -k library -e \"desc tables;\"\n```\n\n</details>\n\nor specify the table you want:\n\n```\nhttp :/rest/v2/schemas/keyspaces/library/tables/users\n```\n\n<details><summary>Show me the CQL for this command</summary>\n \t\n```\nastra db cqlsh workshops -k library -e \"desc users;\"\n```\n\n</details>\n\n<!-- NAVIGATION -->\n<div id=\"navigation-bottom\" class=\"navigation-bottom\">\n <a href='command:katapod.loadPage?[{\"step\":\"step1-astra\"}]'\n   class=\"btn btn-dark navigation-bottom-left\">⬅️ Back - Create Astra DB\n </a>\n <a href='command:katapod.loadPage?[{\"step\":\"step3-astra\"}]'\n    class=\"btn btn-dark navigation-bottom-right\">Next ➡️ REST Rows\n  </a>\n</div>"
    },
    {
      "file": "step3-astra.md",
      "line": 1,
      "description": "<!-- TOP -->\n<div class=\"top\">\n  <img src=\"https://datastax-academy.github.io/katapod-shared-assets/images/ds-academy-2023.svg\" />\n  <div class=\"scenario-title-section\">\n    <span class=\"scenario-title\">Exploring Stargate with HTTPie</span>\n    <span class=\"scenario-subtitle\">ℹ️ For technical support, please contact us via <a href=\"mailto:kirsten.hunter@datastax.com\">email</a> or <a href=\"https://linkedin.com/in/synedra\">LinkedIn</a>.</span>\n  </div>\n</div>\n\n<!-- NAVIGATION -->\n<div id=\"navigation-top\" class=\"navigation-top\">\n <a href='command:katapod.loadPage?[{\"step\":\"step2-astra\"}]' \n   class=\"btn btn-dark navigation-top-left\">⬅️ Back\n </a>\n<span class=\"step-count\"> Step 3 of 3</span>\n <a href='command:katapod.loadPage?[{\"step\":\"finish-astra\"}]' \n    class=\"btn btn-dark navigation-top-right\">Finish\n  </a>\n</div>\n\n<!-- CONTENT -->\n<div class=\"step-title\">Exploring Stargate APIs from the command line - REST Rows</div>\n\nIn this section you will use our httpie configuration to take a look at the Stargate REST API. We will focus on creating and retrieving a table.\n\n- REST - Create Rows\n- REST - Read Rows\n- REST - Update Rows\n- REST - Delete Rows\n\n## 1. Create rows\n\nGreat! The table is created. But it's kind of dull with no data. Go ahead and add a couple different rows with that data.\n\n```\nhttp POST :/rest/v2/keyspaces/library/users json:='\n{\n    \"firstname\": \"Mookie\",\n    \"lastname\": \"Betts\",\n    \"favorite color\": \"blue\"\n}'\n```\n\n```\nhttp POST :/rest/v2/keyspaces/library/users json:='\n{\n    \"firstname\": \"Janesha\",\n    \"lastname\": \"Doesha\",\n    \"favorite color\": \"grey\"\n}'\n```\n\nCheck to make sure they're really in there:\n\n```\nhttp :/rest/v2/keyspaces/library/users where=='{\"firstname\":{\"$in\":[\"Mookie\",\"Janesha\"]}}' -vvv\n```\n\n<details><summary>Show me the CQL</summary>\n \t\n```\nastra db cqlsh workshops -k library -e \"select * from users where firstname IN ('Mookie', 'Janesha');\"\n```\n\n</details>\n\n## 3. Update the rows\n\n```\nhttp PUT :/rest/v2/keyspaces/library/users/Janesha/Doesha json:='{ \"favorite color\": \"Fuchsia\"}'\n```\n\nCheck our work:\n\n```\nhttp :/rest/v2/keyspaces/library/users where=='{\"firstname\":{\"$in\":[\"Mookie\",\"Janesha\"]}}' -vvv\n```\n\n<details><summary>Show me the CQL</summary>\n \t\n```\nastra db cqlsh workshops -k library -e \"select * from users where firstname IN ('Mookie', 'Janesha');\"\n```\n\n</details>\n \t\n## 4. Delete the rows\n\nJanesha has moved away. Let's remove them from the database.\n\n```\nhttp DELETE :/rest/v2/keyspaces/library/users/Janesha/Doesha\n```\n\nSo wait, are they gone?\n\n```\nhttp :/rest/v2/keyspaces/library/users/Janesha/Doesha\n```\n\n## 5. Delete the table\n\nWe don't need our table anymore, let's delete it.\n\n```\nhttp DELETE :/rest/v2/schemas/keyspaces/library/tables/users\n```\n\nDouble checking - what tables are in my keyspace?\n\n```\nhttp :/rest/v2/schemas/keyspaces/library/tables\n```\n\n<div id=\"navigation-bottom\" class=\"navigation-bottom\">\n <a href='command:katapod.loadPage?[{\"step\":\"step2-astra\"}]'\n   class=\"btn btn-dark navigation-bottom-left\">⬅️ Back\n </a>\n <a href='command:katapod.loadPage?[{\"step\":\"finish-astra\"}]'\n    class=\"btn btn-dark navigation-bottom-right\">Finish\n  </a>\n</div>"
    },
    {
      "file": "finish-astra.md",
      "line": 1,
      "description": "<!-- TOP -->\n<div class=\"top\">\n  <img src=\"https://datastax-academy.github.io/katapod-shared-assets/images/ds-academy-2023.svg\" />\n  <div class=\"scenario-title-section\">\n    <span class=\"scenario-title\">Exploring Stargate with HTTPie</span>\n    <span class=\"scenario-subtitle\">ℹ️ For technical support, please contact us via <a href=\"mailto:kirsten.hunter@datastax.com\">email</a> or <a href=\"https://linkedin.com/in/synedra\">LinkedIn</a>.</span>\n  </div>\n</div>\n\n<!-- NAVIGATION -->\n<div id=\"navigation-top\" class=\"navigation-top\">\n <a href='command:katapod.loadPage?[{\"step\":\"step3-astra\"}]' \n   class=\"btn btn-dark navigation-top-left\">⬅️ Back\n </a>\n</div>\n\n<!-- CONTENT -->\n<main>\n    <br/><br/>\n    <div class=\"container px-4 py-2\">\n     <div class=\"row g-4 py-2 row-cols-1 row-cols-lg-1\">\n      <div class=\"feature col div-choice\">\n        <div class=\"scenario-completed\">Lab Completed. Congratulations!</div>\n        <br/>\n        <div class=\"scenario-objectives\">In this hands-on lab, you learned to:</div>\n        <ul>\n              <li><span class=\"scenario-objective\">Connect your workspace to the Astra Database</span></li>\n              <li><span class=\"scenario-objective\">Explore Stargate APIs using httpie</span></li>       \n        </ul>\n      </div>\n</div>\n\n</main>\n\n<!-- NAVIGATION -->\n<div id=\"navigation-bottom\" class=\"navigation-bottom\">\n <a href='command:katapod.loadPage?[{\"step\":\"step3-astra\"}]'\n   class=\"btn btn-dark navigation-bottom-left\">⬅️ Back\n </a>\n</div>\n<br/>"
    },
    {
      "file": "thanks-astra.md",
      "line": 1,
      "description": "<!-- TOP -->\n<div class=\"top\">\n  <img src=\"https://datastax-academy.github.io/katapod-shared-assets/images/ds-academy-2023.svg\" />\n  <div class=\"scenario-title-section\">\n    <span class=\"scenario-title\">Exploring Stargate with HTTPie</span>\n    <span class=\"scenario-subtitle\">ℹ️ For technical support, please contact us via <a href=\"mailto:kirsten.hunter@datastax.com\">email</a> or <a href=\"https://linkedin.com/in/synedra\">LinkedIn</a>.</span>\n  </div>\n</div>\n\n<!-- NAVIGATION -->\n<div id=\"navigation-top\" class=\"navigation-top\">\n <a href='command:katapod.loadPage?[{\"step\":\"finish-astra\"}]' \n   class=\"btn btn-dark navigation-top-left\">⬅️ Back\n </a>\n</div>\n\n<!-- CONTENT -->\n<main>\n    <br/><br/>\n    <div class=\"container px-4 py-2\">\n     <div class=\"row g-4 py-2 row-cols-1 row-cols-lg-1\">\n      <div class=\"feature col div-choice\">\n        <div class=\"scenario-completed\">Thanks!</div>\n        <br/>\n        <div class=\"scenario-objectives\">Your email has been entered to win some excellent Datastax swag!</div>\n      </div>\n     </div>\n    </div>\n</main>\n\n<!-- NAVIGATION -->\n<div id=\"navigation-bottom\" class=\"navigation-bottom\">\n <a href='command:katapod.loadPage?[{\"step\":\"finish-astra\"}]'\n   class=\"btn btn-dark navigation-bottom-left\">⬅️ Back\n </a>\n</div>\n<br/>"
    }
  ]
}